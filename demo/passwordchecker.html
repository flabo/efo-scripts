<!DOCTYPE html>
<html>
	<head>
		<title>EFO サンプルスクリプト</title>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script src="../src/jquery.passwordchecker.js"></script>
		<link href="/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
	</head>
	<body>
		<div id="element"></div>
		<form>
			<input type="password" id="password"/>
			<p>パスワード強度：<span id="passwordchecker"></span></p>
		</form>
		<script>
			$(function() {
				$("#password").on('keyup', function(){
					var dispStrength = function(pwd) {
						var calc = function(pwd) {
							var score = 0;
							if (pwd.length > 5 && pwd.length < 8) {
								score = (score + 6);
							}
							else if (pwd.length > 7 && pwd.length < 16) {
								score = (score + 12);
							} else if (pwd.length > 15)
							{
								score = (score + 18);
							}
							if (pwd.match(/[a-z]/)) {
								score = (score + 1);
							}
							if (pwd.match(/[A-Z]/)) {
								score = (score + 5);
							}
							if (pwd.match(/\d+/))
							{
								score = (score + 5);
							}
							if (pwd.match(/(.*[0-9].*[0-9].*[0-9])/))
							{
								score = (score + 5);
							}
							if (pwd.match(/.[!,@,#,$,%,^,&,*,?,_,~]/))
							{
								score = (score + 5);
							}
							if (pwd.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)) {
								score = (score + 5);
							}
							if (pwd.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/))
							{
								score = (score + 2);
							}
							if (pwd.match(/([a-zA-Z])/) && pwd.match(/([0-9])/))
							{
								score = (score + 2);
							}
							if (pwd.match(/([a-zA-Z0-9].*[!,@,#,$,%,^,&,*,?,_,~])|([!,@,#,$,%,^,&,*,?,_,~].*[a-zA-Z0-9])/)) {
								score = (score + 2);
							}
							return score;
						}
						var ps = calc(pwd);
						if (ps < 25) {
							return "弱";
						} else if (ps < 35) {
							return "中";
						} else if (ps > 34) {
							return "強";
						}
						return "";
					};
					var string = $(this).val();
					var ps = dispStrength(string);
					if (ps) $('#passwordchecker').text(ps);
				});
			});
		</script>
	</body>
</html>
